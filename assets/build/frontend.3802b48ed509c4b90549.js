(()=>{var e={736:e=>{e.exports=function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(e,t,n){"use strict";n.r(t);var s=0,r=1,i=2,o=3,d=4;class l{constructor(e,t,n){this.startInOld=e,this.startInNew=t,this.size=n}get endInOld(){return this.startInOld+this.size}get endInNew(){return this.startInNew+this.size}}class a{constructor(){this.blockSize=0,this.repeatingWordsAccuracy=0,this.ignoreWhitespaceDifferences=!1}}const c=/^\s*<\/?[^>]+>\s*$/,h=/<[^\s>]+/,u=/^(\s|&nbsp;)+$/,p=/[\w\#@]+/,f=["<img"];function w(e){return!f.some((t=>null!==e&&e.startsWith(t)))&&c.test(e)}function m(e,t,n){return["<",t,' class="',n,'">',e,"</",t,">"].join("")}function g(e){return"<"===e}function I(e){return"&"===e}function W(e){return";"===e}function v(e){return u.test(e)}function y(e){return p.test(e)}function x(e,t,n){return e.push(t),e.length>n&&e.shift(),e.length!==n?null:e.join("")}class O{constructor(e,t,n,s,r,i,o){this.oldWords=e,this.newWords=t,this.startInOld=n,this.endInOld=s,this.startInNew=r,this.endInNew=i,this.options=o}indexNewWords(){this.wordIndices=new Map;let e=[];for(let t=this.startInNew;t<this.endInNew;t++){let n=x(e,this.normalizeForIndex(this.newWords[t]),this.options.blockSize);null!==n&&(this.wordIndices.has(n)?this.wordIndices.get(n).push(t):this.wordIndices.set(n,[t]))}}normalizeForIndex(e){return e=function(e){return w(e)?function(e){return h.exec(e)[0]+(e.endsWith("/>")?"/>":">")}(e):e}(e),this.options.IgnoreWhiteSpaceDifferences&&v(e)?" ":e}findMatch(){if(this.indexNewWords(),this.removeRepeatingWords(),0===this.wordIndices.length)return null;let e=this.startInOld,t=this.startInNew,n=0,s=new Map;const r=this.options.blockSize;let i=[];for(let o=this.startInOld;o<this.endInOld;o++){let d=x(i,this.normalizeForIndex(this.oldWords[o]),r);if(null===d)continue;let l=new Map;if(this.wordIndices.has(d)){for(let i of this.wordIndices.get(d)){let d=(s.has(i-1)?s.get(i-1):0)+1;l.set(i,d),d>n&&(e=o-d-r+2,t=i-d-r+2,n=d)}s=l}else s=l}return 0!==n?new l(e,t,n+r-1):null}removeRepeatingWords(){let e=this.newWords.length+this.options.repeatingWordsAccuracy,t=Array.from(this.wordIndices.entries()).filter((t=>t[1].length>e)).map((e=>e[0]));for(let n of t)this.wordIndices.delete(n)}}class b{constructor(e,t,n,s,r){this.action=e,this.startInOld=t,this.endInOld=n,this.startInNew=s,this.endInNew=r}}var k=0,N=1,_=2,M=3;function E(e,t){let n={mode:k,currentWord:[],words:[]},s=function(e,t){let n=new Map;if(null===t)return n;for(let s of t){let t;for(;null!==(t=s.exec(e));){if(n.has(t.index))throw new Error("One or more block expressions result in a text sequence that overlaps. Current expression: "+s.toString());n.set(t.index,t.index+t[0].length)}}return n}(e,t),r=!!s.size,i=!1,o=-1;for(let l=0;l<e.length;l++){var d=e[l];if(r){o===index&&(o=-1,i=!1);let e=0;if(s.has(index)&&(i=!0,o=e=s.get(index)),i){n.currentWord.push(d),n.mode=k;continue}}switch(n.mode){case k:g(d)?D(n,"<",N):I(d)?D(n,d,M):v(d)?D(n,d,_):y(d)&&(0===n.currentWord.length||y(n.currentWord[n.currentWord.length-1]))?n.currentWord.push(d):D(n,d,k);break;case N:">"===d?(n.currentWord.push(d),n.words.push(n.currentWord.join("")),n.currentWord=[],n.mode=v(d)?_:k):n.currentWord.push(d);break;case _:g(d)?D(n,d,N):I(d)?D(n,d,M):v(d)?n.currentWord.push(d):D(n,d,k);break;case M:if(g(d))D(n,d,N);else if(v(d))D(n,d,_);else if(W(d)){let e=!0;if(0!==n.currentWord.length&&(n.currentWord.push(d),n.words.push(n.currentWord.join("")),n.words.length>2&&v(n.words[n.words.length-2])&&v(n.words[n.words.length-1]))){let t=n.words[n.words.length-2],s=n.words[n.words.length-1];n.words.splice(n.words.length-2,2),n.currentWord=[(t+s).split()],n.mode=_,e=!1}e&&(n.currentWord=[],n.mode=k)}else y(d)?n.currentWord.push(d):D(n,d,k)}}return 0!==n.currentWord.length&&n.words.push(n.currentWord.join("")),n.words}function D(e,t,n){0!==e.currentWord.length&&e.words.push(e.currentWord.join("")),e.currentWord=[t],e.mode=n}const T=new Map([["</strong>",0],["</em>",0],["</b>",0],["</i>",0],["</big>",0],["</small>",0],["</u>",0],["</sub>",0],["</strike>",0],["</s>",0]]),L=/<((strong)|(b)|(i)|(em)|(big)|(small)|(u)|(sub)|(sup)|(strike)|(s))[\>\s]+/gi;class S{constructor(e,t){this.content=[],this.newText=t,this.oldText=e,this.specialTagDiffStack=[],this.newWords=[],this.oldWords=[],this.matchGranularity=0,this.blockExpressions=[],this.repeatingWordsAccuracy=1,this.ignoreWhiteSpaceDifferences=!1,this.orphanMatchThreshold=0}build(){if(this.oldText===this.newText)return this.newText;this.splitInputsIntoWords(),this.matchGranularity=Math.min(4,this.oldWords.length,this.newWords.length);let e=this.operations();for(let t of e)this.performOperation(t);return this.content.join("")}addBlockExpression(e){this.blockExpressions.push(e)}splitInputsIntoWords(){this.oldWords=E(this.oldText,this.blockExpressions),this.oldText=null,this.newWords=E(this.newText,this.blockExpressions),this.newText=null}performOperation(e){switch(e.action){case s:this.processEqualOperation(e);break;case r:this.processDeleteOperation(e,"diffdel");break;case i:this.processInsertOperation(e,"diffins");break;case o:break;case d:this.processReplaceOperation(e)}}processReplaceOperation(e){this.processDeleteOperation(e,"diffmod"),this.processInsertOperation(e,"diffmod")}processInsertOperation(e,t){let n=this.newWords.filter(((t,n)=>n>=e.startInNew&&n<e.endInNew));this.insertTag("ins",t,n)}processDeleteOperation(e,t){let n=this.oldWords.filter(((t,n)=>n>=e.startInOld&&n<e.endInOld));this.insertTag("del",t,n)}processEqualOperation(e){let t=this.newWords.filter(((t,n)=>n>=e.startInNew&&n<e.endInNew));this.content.push(t.join(""))}insertTag(e,t,n){for(;n.length;){let s=this.extractConsecutiveWords(n,(e=>!w(e))),r="",i=!1;if(0!==s.length){let n=m(s.join(""),e,t);this.content.push(n)}else{if(L.test(n[0])){if(this.specialTagDiffStack.push(n[0]),r='<ins class="mod">',"del"===e)for(n.shift();n.length>0&&L.test(n[0]);)n.shift()}else if(T.has(n[0])){let t=0===this.specialTagDiffStack.length?null:this.specialTagDiffStack.pop();if(null!==t&&t===n[0].replace(/\//g,"")&&(r="</ins>",i=!0),"del"===e)for(n.shift();n.length>0&&T.has(n[0]);)n.shift()}if(0===n.length&&0===r.length)break;i?this.content.push(r+this.extractConsecutiveWords(n,w).join("")):this.content.push(this.extractConsecutiveWords(n,w).join("")+r)}}}extractConsecutiveWords(e,t){let n=null;for(let s=0;s<e.length;s++){let r=e[s];if(0===s&&" "===r&&(e[s]="&nbsp;"),!t(r)){n=s;break}}if(null!==n){let t=e.filter(((e,t)=>t>=0&&t<n));return n>0&&e.splice(0,n),t}{let t=e.filter(((t,n)=>n>=0&&n<e.length));return e.splice(0,e.length),t}}operations(){let e=0,t=0,n=[],a=this.matchingBlocks();a.push(new l(this.oldWords.length,this.newWords.length,0));let c=this.removeOrphans(a);for(let l of c){let a,c=e===l.startInOld,h=t===l.startInNew;(a=c||h?c&&!h?i:c?o:r:d)!==o&&n.push(new b(a,e,l.startInOld,t,l.startInNew)),0!==l.length&&n.push(new b(s,l.startInOld,l.endInOld,l.startInNew,l.endInNew)),e=l.endInOld,t=l.endInNew}return n}*removeOrphans(e){let t=null,n=null;for(let s of e){if(null===n){t=new l(0,0,0),n=s;continue}if(t.endInOld===n.startInOld&&t.endInNew===n.startInNew||n.endInOld===s.startInOld&&n.endInNew===s.startInNew){yield n,t=n,n=s;continue}let e=(e,t)=>e+t.length,r=this.oldWords.slice(t.endInOld,s.startInOld).reduce(e,0),i=this.newWords.slice(t.endInNew,s.startInNew).reduce(e,0);this.newWords.slice(n.startInNew,n.endInNew).reduce(e,0)>Math.max(r,i)*this.orphanMatchThreshold&&(yield n),t=n,n=s}yield n}matchingBlocks(){let e=[];return this.findMatchingBlocks(0,this.oldWords.length,0,this.newWords.length,e),e}findMatchingBlocks(e,t,n,s,r){let i=this.findMatch(e,t,n,s);null!==i&&(e<i.startInOld&&n<i.startInNew&&this.findMatchingBlocks(e,i.startInOld,n,i.startInNew,r),r.push(i),i.endInOld<t&&i.endInNew<s&&this.findMatchingBlocks(i.endInOld,t,i.endInNew,s,r))}findMatch(e,t,n,s){for(let r=this.matchGranularity;r>0;r--){let i=new a;i.blockSize=r,i.repeatingWordsAccuracy=this.repeatingWordsAccuracy,i.ignoreWhitespaceDifferences=this.ignoreWhiteSpaceDifferences;let o=new O(this.oldWords,this.newWords,e,t,n,s,i).findMatch();if(null!==o)return o}return null}}S.execute=function(e,t){return new S(e,t).build()},t.default=S},function(e,t,n){e.exports=n(0)}])}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(736),t=n.n(e);class s extends Map{set(){return document.dispatchEvent(new CustomEvent("hm-post-history.revision-added",{detail:{key:arguments.length<=0?void 0:arguments[0],value:arguments.length<=1?void 0:arguments[1]}})),super.set(...arguments)}delete(){return document.dispatchEvent(new CustomEvent("hm-post-history.revision-removed",{detail:{key:arguments.length<=0?void 0:arguments[0]}})),super.get(...arguments)}}let r={api:{base:void 0,nonce:void 0},default:{per_page:void 0},postID:void 0,marker:{selector:void 0}},i="";const o=new s;function d(e){let t=document;return e&&(t=e),t.querySelector(r.marker.selector)||!1}function l(){return document.querySelector("button[data-post-history-load-more]")}function a(){const e=function(){const e=d();return!!e&&e.parentElement}();e&&(e.dataset.postHistoryDiffContainer="",e.classList.add("hm-post-history__diff-container"),i=function(e){if(e){const t=e.cloneNode(!0),n=d(t);return n&&t.removeChild(n),t.normalize(),t.innerHTML}return""}(e))}function c(){const e=document.querySelector("[data-post-history-diff-list]"),n=n=>{const{author:s,date:r,id:d}=n.detail.value,l=document.createElement("li");l.classList.add("hm-post-history__diff"),l.dataset.postHistoryDiffId=d,l.innerHTML=`<button class="hm-post-history__select-diff" type="button" value="${d}">${r} - ${s}</button>`,l.addEventListener("click",(()=>{!function(e){const n=o.get(e);n&&(!function(e){const n=document.querySelector("[data-post-history-diff-container]");n&&(n.innerHTML=t().execute(e,i))}(function(e){const t=document.createElement("div");return t.innerHTML=e,t.normalize(),t.innerHTML}(n.content)),document.dispatchEvent(new CustomEvent("hm-post-history.diff-switched",{detail:{currentDiffID:e}})))}(d)})),e.appendChild(l)},s=t=>{const n=e.querySelector(`[data-post-history-diff-id="${t.detail.key}"]`);n&&e.removeChild(n)},r=t=>{const n=t.detail.currentDiffID;e.querySelectorAll("li").forEach((e=>{e.classList.remove("hm-post-history__diff--current"),parseInt(e.dataset.postHistoryDiffId,10)===n&&e.classList.add("hm-post-history__diff--current")}))};e&&(document.addEventListener("hm-post-history.revision-added",n),document.addEventListener("hm-post-history.revision-removed",s),document.addEventListener("hm-post-history.diff-switched",r))}function h(){const e=l();e&&(e.addEventListener("click",(()=>{let t=parseInt(e.dataset.postHistoryLoadMore,10)||!1;!function(e){"number"!==typeof e&&(e=1);const t=new URL(`${r.api.base.pathname}/revisions/${r.postID}/`,r.api.base.href);t.searchParams.set("paged",e),t.searchParams.set("per_page",r.default.per_page);const n=new Request(t.href,{credentials:"include",headers:new Headers({"X-WP-Nonce":r.api.nonce})}),s=l();s.classList.add("hm-post-history__load-more--loading"),fetch(n).then((e=>{if(s.classList.remove("hm-post-history__load-more--loading"),e.ok)return e.json();s.classList.add("hm-post-history__load-more--failed")})).then((e=>{e.revisions.map((e=>(o.has(e.id)||o.set(e.id,e),o))),!1===e.hasMore&&document.dispatchEvent(new Event("hm-post-history.no-more-revisions"))}))}(t),e.dataset.postHistoryLoadMore=++t})),document.addEventListener("hm-post-history.no-more-revisions",(()=>{e.hidden=!0,e.disabled=!0})))}(function(){!function(){const{api_base:e,api_nonce:t,per_page_default:n}=window.HMPostHistorySettings,{post_id:s,marker_selector:i}=window.HMPostHistoryCurrentItem;r.api.base=new URL(e),r.api.nonce=t,r.default.per_page=n,r.postID=parseInt(s,10),r.marker.selector=i}(),"undefined"!=typeof r.api.base&&"undefined"!=typeof r.api.nonce&&"undefined"!=typeof r.default.per_page&&"undefined"!=typeof r.postID&&"undefined"!=typeof r.marker.selector&&(a(),c(),h())})()})()})();